/*C2*/SET SCHEMA PUBLIC
CONNECT USER SA
ALTER TABLE GAMEPERSON DROP CONSTRAINT FK_GAMEPERSON_Game_Name
ALTER TABLE GAMEPERSON DROP CONSTRAINT FK_GAMEPERSON_Person_Name
DROP TABLE person
DROP TABLE game
DROP TABLE GAMEPERSON
CREATE TABLE person (Person_Name VARCHAR(255) NOT NULL, PRIMARY KEY (Person_Name))
CREATE TABLE game (Game_Name VARCHAR(255) NOT NULL, PRIMARY KEY (Game_Name))
CREATE TABLE GAMEPERSON (POINTS INTEGER, Game_Name VARCHAR(255) NOT NULL, Person_Name VARCHAR(255) NOT NULL, PRIMARY KEY (Game_Name, Person_Name))
ALTER TABLE GAMEPERSON ADD CONSTRAINT FK_GAMEPERSON_Game_Name FOREIGN KEY (Game_Name) REFERENCES game (Game_Name)
ALTER TABLE GAMEPERSON ADD CONSTRAINT FK_GAMEPERSON_Person_Name FOREIGN KEY (Person_Name) REFERENCES person (Person_Name)
SET AUTOCOMMIT FALSE
INSERT INTO GAME VALUES('TestGame')
COMMIT
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
INSERT INTO PERSON VALUES('Derp')
INSERT INTO GAMEPERSON VALUES(5,'TestGame','Derp')
COMMIT
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
DELETE FROM GAMEPERSON WHERE GAME_NAME='TestGame' AND PERSON_NAME='Derp'
INSERT INTO GAMEPERSON VALUES(6,'TestGame','Derp')
COMMIT
SET AUTOCOMMIT TRUE
